# Real-Time-Systems

- [Real-Time-Systems](#real-time-systems)
  - [Commands](#commands)
      - [fork ()](#fork-)
      - [wait ()](#wait-)
      - [pipe ()](#pipe-)
      - [signal ()](#signal-)
      - [execl ()](#execl-)
  - [File In-/Output](#file-in-output)
      - [create()](#create)
      - [open()](#open)
      - [close()](#close)
      - [read()](#read)
      - [write()](#write)

## Commands

#### fork ()
- creates new process - the child process
- child process starts right after the fork() function was called
- a child process can call another chid processf
- when multiple child processes are called it is uncertain which one will be executed first

```c
#include <sys/types.h>
pid_t fork( void );
```

| Return | Description                                                             |
| :----: | :---------------------------------------------------------------------- |
|   -1   | Error                                                                   |
|   0    | returned to newly created child process                                 |
|  > 0   | returned to parent / value == process ID of newly created child process |

**Coding examples:**
```c
pid_t pid = fork();

if( pid == -1 ) {
    printf("Error!");   
    exit(1);
}
else if( pid == 0 ) {
    // instructions for child-process
}
else {
    // instructions for parent-process
}
```

```c
switch ( fork() ) {
    case -1 :   printf("Error!");
                exit(1);
              
    case  0 :   // instructions for child-process
                break;
    default :   // instructions for parent-process
                break;
}
```


#### wait ()
- blocks the parent process till one child process exits or a signal is created 
- usually called after `fork()`

```c
#include <sys/types.h>
pid_t wait( int *stat_lock );
```


#### pipe ()
- connects two processes
- standart output of one process becomes standart input of other process
- one way communication

```c
#include <sys/types.h>
int pipe( int fds[2] );
```

| Return | Description |
| :----: | :---------- |
|   -1   | Error       |
|   0    | Succsess    |

| Parameter | Description                         |
| :-------: | :---------------------------------- |
|   fd[0]   | file descriptor for the 'read end'  |
|   fd[1]   | file descriptor for the 'write end' |


#### signal ()
```c
#include <signal.h>
void *signal( int sig, void (*func)(int) )(int)
```
- `sig` is the signal number to which a handling function is set

|    sig    | Macro & Signal                                                                                                                                                                |
| :-------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `SIGABRT` | (Signal Abort) Abnormal termination, such as is initiated by the function                                                                                                     |
| `SIGFPE`  | (Signal Floating-Point Exception) Erroneous arithmetic operation, such as zero divide or an peration resulting in overflow (not necessarily with a floating-point operation). |
| `SIGILL`  | (Signal Illegal Instruction) Invalid function image, such as an illegal instruction. This is generally due to a corruption in the code or to an attempt to execute data.      |
| `SIGINT`  | (Signal Interrupt) Interactive attention signal. Generally generated by the application user.                                                                                 |
| `SIGSEGV` | (Signal Segmentation Violation) Invalid access to storage − When a program tries to read or write outside the memory it is allocated for it.                                  |
| `SIGTERM` | (Signal Terminate) Termination request sent to program.                                                                                                                       |

- `*func` is a pointer to a function (either defiend by programmer or predefined)

|   func    | Function & Description                                                                     |
| :-------: | :----------------------------------------------------------------------------------------- |
| `SIG_DFL` | Default handling − The signal is handled by the default action for that particular signal. |
| `SIG_IGN` | Ignore Signal − The signal is ignored.                                                     |

|  Return   | Description                          |
| :-------: | :----------------------------------- |
| `SIG_ERR` | Error                                |
|    > 0    | previous value of the signal handler |


#### execl ()
```c
#include <unistd.h>
int execl( const char *path, "ls", const char *arg_1, ..., NULL );
```



## File In-/Output

#### create()
- create new and empty file
```c
int create( char *filename, mode_t mode )
```
- `filename` : name of the file which you want to create
- `mode` : indicates permissions of new file

| Return | Description          |
| :----: | :------------------- |
|   -1   | Error                |
|  >= 0  | Used File Descriptor |

#### open()
- opens file for reading, writing or both
```c
#include <fcntl.h>
int open( const char* Path, int flags [ int mode ] ); 
```
- `Path` : path to file which you want to use

|   Flags    | Description                           |
| :--------: | :------------------------------------ |
| `O_RDONLY` | read only                             |
| `O_WRONLY` | write only                            |
|  `O_RDWR`  | read and write                        |
| `O_CREAT`  | create file if it doesn’t exist       |
|  `O_EXCL`  | prevent creation if it already exists |

| Return | Description          |
| :----: | :------------------- |
|   -1   | Error                |
|  >= 0  | Used File Descriptor |

#### close()
- close the file which the file descriptor (`fd`) points to
```c
#include <fcntl.h>
int close( int fd );
```
| Return | Description |
| :----: | :---------- |
|   -1   | Error       |
|   0    | Succsess    |


#### read()
```c
#include <fcntl.h>
size_t read( int fd, void* buf, size_t buf_size );
```
- `fd` : file descriptor
- `buf` : buffer to read data from
- `buf_size` : length of buffer

| Return | Description              |
| :----: | :----------------------- |
|   -1   | Error / Signal Interrupt |
|   0    | EOF                      |
|  > 0   | Number of Bytes Read     |


#### write()
```c
#include <fcntl.h>
size_t write( int fd, void* buf, size_t buf_size );
```
- `fd` : file descriptor
- `buf` : buffer to write data to
- `buf_size` : length of buffer

| Return | Description              |
| :----: | :----------------------- |
|   -1   | Error / Signal Interrupt |
|   0    | EOF                      |
|  > 0   | Number of Bytes Read     |